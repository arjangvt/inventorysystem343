<!doctype html>
<script>
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
</script>
<script>
	function tableCreate(data) 
	{
		var body = document.getElementsByTagName('body')[0];
 		var tbl = document.createElement('table');
		tbl.style.width = '100%';
		tbl.setAttribute('border', '1');
		var tbdy = document.createElement('tbody');
		for (var i = 0; i < data.length; i++) 
		{      //rows
			var tr = document.createElement('tr');
			var row_content = data[i];
				  for (var key of Object.keys(data[i]))
				  {
					  var td = document.createElement('td');
        				  td.appendChild(document.createTextNode(data[i][key]));
        				  //td.setAttribute('rowSpan', row_content;
        				  tr.appendChild(td);
				  }
    			tbdy.appendChild(tr);
  		}
		tbl.appendChild(tbdy);
  		body.appendChild(tbl)
	}

	function load_product()
	{
		let request = new XMLHttpRequest();
		url = "http://localhost:8000/products";
		request.open("GET", url);
		request.send();
		request.onload = () => {
			// Do something here
			if (request.status == 200) {

                                var data = JSON.parse(request.response);

				if (data.length > 0)
                                {
					tableCreate(data);
					//alert(data.length);

                                }
                                else
				{
                                        //document.getElementById("lblMessage").innerHTML = "The password is incorrect!";
				}
                        }
			else
			{
                                //alert("Error");
                                console.log("Error");
                        }

		}


	}
	
	function getProductInfo()
	{
		alert ("I am in ProductInfo");
	}
</script>


<html lang="en">
	<head>
		<title>Product Management</title>
	</head>

	<body onload="load_product()">
		<h1>Product Management</h1>

		<label id="name"> Product Name </label>
                <input type="text"  id="txtProductName"/>
		<label id="model"> Product Model </label>
		<input type="text" id="txtModel"/>
		<label id="serial">Product Serial Number</label>
		<input type="text" id="txtSerial"/>
                <input type="submit" onclick="getProductInfo()"/>
		<br><br>


	</body>
	<br>
</html>
